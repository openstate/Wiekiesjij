{% extends 'frontoffice/base.html' %}
{% load i18n form_tags %}

{% block extrahead %}
	{{ form.media }}
{% endblock extrahead %}

{% block cols %}
<div class="col size1of4">
    <div class="mod filter">
    	<div class="hd">
        	<h2>{% trans "Filter" %}</h2>
        </div>
    	<div class="bd">
            
            <form action="{% url fo.politician_profile_filter %}" method="get" accept-charset="utf-8">
                <input type="hidden" name="next" value="{{ next }}" />
                
                {% if form.non_field_errors %}
                    <div class="errors">
                        {% for error in form.non_field_errors %}
                        <p class="error">{{ error }}</p>
                        {% endfor %}
                    </div>	
                {% endif %}
                
        
                <fieldset class="default">
                    {% for field in form %}
                        {% include 'utils/forms/_form_field.html' %}
                                          
                    {% endfor %}
                </fieldset>
        
            	<div class="form-submit">
                    <button class="primary next" type="submit">{% trans "Search" %}</button>
                </div>
            </form>
            <a href="{% url fo.politician_profile_filter %}">{% trans 'Clear All Filters' %}</a>
       	</div>
    
    </div>
</div>

<div class="col size3of4">

	<div class="mod">
    	<div class="hd">
        	<h2>{% trans "Politicians" %}</h2>
        </div>
    	<div class="bd">

            <ul>
                {% for filter1, filter2, filter3 in filters %}
                    <li><a href="{{ filter3 }}">{{ filter1 }}: {{ filter2 }}</a></li>
                {% endfor %}
            </ul>
            <div class="pagination">
                <span class="step-links">
                    {% if politicians.has_previous %}
                        <a href="?page={{ politicians.previous_page_number }}">{% trans 'previous' %}</a>
                    {% endif %}

                    <span class="current">
                        {% trans 'Page' %} {{ politicians.number }} {% trans 'of' %} {{ politicians.paginator.num_pages }}.
                    </span>

                    {% if politicians.has_next %}
                        <a href="?page={{ politicians.next_page_number }}">{% trans 'next' %}</a>
                    {% endif %}
                </span>
            </div>
            <div class="pol-block-list">
            {% for politician in politicians.object_list %}
                <div class="pol-block">
                	<div class="image">
                        {% if politician.picture %}
                            <img alt="{{ politician.full_name }}" src="{{ politician.picture.url }}" />
                        {% else %}
                            <img alt="{{ politician.full_name }}" src="/link/to/default/" />
                        {% endif %}
                    </div>
                    <a href="{% url fo.politician_profile politician.user.id %}" class="name">{{ politician.full_name }}</a>
                    <p>{% trans 'Age' %}: {{ politician.age }}</p>
                    <p>{% trans 'Party' %}: {{ politician.party }}</p>
                    {% if not region_filtered %}
                        <p>{% trans 'Region' %}: {{ politician.region }}</p>
                    {% endif %}
                    
                </div>
            
    
            {% empty %}
                <p>{% trans 'No Politicians: please search or select a filter options' %}
            {% endfor %}
            </div> 
		</div>
    </div>
</div>
{% endblock cols %}